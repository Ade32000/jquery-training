<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Exercice Jquery - Partie 4</title>
	<script src="/home/adeline/node_modules/jquery/dist/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="styleIV_1.css">
</head>
<body>
	
	<div id="bloc">
		
		<h2>Veuillez cocher une case :</h2>
		<div id="liste"> 
			<ul>
				<li><input type="checkbox" name="pierre" id="pierre" value="pierre"> Pierre</li>
				<li><input type="checkbox" name="feuille" id="feuille" value="feuille"> Feuille</li>
				<li><input type="checkbox" name="ciseaux" id="ciseaux" value="ciseaux"> Ciseaux</li>
			</ul>
		</div>
		<button type="button" id="rejouer">Rejouer</button><button type="button" name="bouton" id="bouton">Shifumi !</button><br><br>
			<span class="rest">Le choix de l'ordinateur est : </span><span class="res" id="choix"></span><br><br>
			<span class="rest" id="result">Résultat : </span><span class="res" id="resultat"></span><br><br>
			<span class="rest">Nbr de victoires : </span><span class="res" id="victoire"></span><br>
			<span class="rest">Nbr de défaites : </span><span class="res" id="défaite"></span><br>
			<span class="rest">Pourcentage de victoires : </span><span class="res" id="pourcent"></span><span>  %</span><br>

	</div>	
	
	
	<script>

		var Vic = 0;
		var Def = 0;
		var Nul = 0;
		var Nbr_de_partie = 0;


		$('#bouton').on('click', function check()
		{
			var tableau = ($('input').html('')).toArray();
			var choixAI = Math.floor(Math.random() * tableau.length);
			var nbChecked = $("#liste").find("input[type=checkbox]:checked").length;
			var pierre = $('#pierre').is(':checked');
			var feuille = $('#feuille').is(':checked');
			var ciseaux = $('#ciseaux').is(':checked');


			if (nbChecked == 0)
			{
				alert('Veuillez cocher une case !');
			}
			else if (nbChecked == 2 || nbChecked == 3)
			{
				alert('Merci de ne cocher qu\'une seule case!');
			}
			else
			{
				if ((pierre == true && choixAI == 0) || (feuille == true && choixAI == 1) || (ciseaux == true && choixAI == 2))
				{
						if (choixAI == 0)
						{
							$('#choix').html('Pierre');
						}
						else if (choixAI == 1)
						{
							$('#choix').html('Feuille');
						}
						else
						{
							$('#choix').html('Ciseaux');
						}

					$('#resultat').html('Match nul !');
					Nul = Nul + 1;
				}
				else if ((pierre == true && choixAI == 2) || (feuille == true && choixAI == 0) || (ciseaux == true && choixAI == 1))
				{
					if (choixAI == 0)
						{
							$('#choix').html('Pierre');
						}
						else if (choixAI == 1)
						{
							$('#choix').html('Feuille');
						}
						else
						{
							$('#choix').html('Ciseaux');
						}

					$('#resultat').html('Vous avez gagné !');
					Vic = Vic + 1;
					$('#victoire').html(Vic);
				}
				else
				{
					if (choixAI == 0)
						{
							$('#choix').html('Pierre');
						}
						else if (choixAI == 1)
						{
							$('#choix').html('Feuille');
						}
						else
						{
							$('#choix').html('Ciseaux');
						}

					$('#resultat').html('Vous avez perdu !');
					Def = Def + 1;
					$('#défaite').html(Def);
				}
			}
			Nbr_de_partie = Vic + Def;
			$('#pourcent').html(Math.trunc((Vic * 100) / Nbr_de_partie));
		});

		$('#rejouer').on('click', function()
		{
			$('#pierre').prop('checked', false);
			$('#feuille').prop('checked', false);
			$('#ciseaux').prop('checked', false);
			$('#choix #resultat').html('');			
		});
	
	</script>
</body>
</html>